name: Test SSH Connection (New)

on:
  workflow_dispatch:

jobs:
  test:
    runs-on: ubuntu-latest
    steps:
      - name: è§¦å‘è¿æ¥æµ‹è¯•
        uses: actions/github-script@v7
        with:
          github-token: ${{ secrets.DEPLOY_CENTER_PAT }}
          script: |
            console.log('ğŸš€ å¼€å§‹è§¦å‘è¿æ¥æµ‹è¯•...');
            console.log('ç›®æ ‡ä»“åº“: MoseLu/axi-deploy');
            console.log('å·¥ä½œæµ: test-connection.yml');
            console.log('åˆ†æ”¯: master');
            
            const { data: response } = await github.rest.actions.createWorkflowDispatch({
              owner: 'MoseLu',
              repo: 'axi-deploy',
              workflow_id: 'test-connection.yml',
              ref: 'master',
              inputs: {
                caller_repo: '${{ github.repository }}',
                caller_branch: '${{ github.ref_name }}',
                caller_commit: '${{ github.sha }}'
              }
            });
            
            console.log('âœ… è¿æ¥æµ‹è¯•å·²è§¦å‘:', response); 